language: ruby
services:
  - docker
install: bundle install --without="development"
before_script:
  - rake docker:build_testing
script:
  - rake tests:run_all
before_deploy: sh ./scripts/ci/before_deploy.sh
deploy:
  provider: script
  script: echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
  on:
    branch: feat/ci_cd
