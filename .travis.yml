language: ruby
services:
  - docker
install: bundle install --without="development"
before_script:
  - rake docker:build_testing
script:
  - rake tests:run_all
deploy:
  provider: script
  script: echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin && docker:build_push_prod
  on:
    branch: feat/ci_cd
